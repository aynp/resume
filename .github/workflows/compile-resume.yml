name: Recompile Resume
on: [push]
jobs:
    TEX-to-IMG:
        runs-on: ubuntu-latest
        steps:
            - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
            - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"

            - name: Install deps
              run: sudo apt-get install texlive-latex-base poppler-utils texlive-latex-extra --no-install-recommends

            - name: Check out repository code
              uses: actions/checkout@v3

            - name: Tex to PDF
              run: pdflatex resume.tex

            - name: PDF to png
              run: pdftoppm -png resume.pdf resume

            - name: switching from HTTPS to SSH
              run: git remote set-url origin ${{ secrets.ssh }}

            - name: check for changes
              run: git status

            - name: stage changed files
              run: git add .

            - name: commit changed files
              run: git commit -m "Auto updating TODO.txt"

            - name: fetch from master
              run: git fetch origin master

            - name: push code to master
              run: git push origin HEAD:master
